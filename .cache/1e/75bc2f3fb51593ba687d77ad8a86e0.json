{"id":"xt70","dependencies":[{"name":"/Users/steve/Documents/Projects/notedly_app/web/package.json","includedInParent":true,"mtime":1634550415413},{"name":"/Users/steve/Documents/Projects/notedly_app/web/.babelrc","includedInParent":true,"mtime":1634038347786},{"name":"/Users/steve/Documents/Projects/notedly_app/web/node_modules/trough/package.json","includedInParent":true,"mtime":1634309499550}],"generated":{"js":"\"use strict\";function t(){const t=[],e={run:function(...e){let o=-1;const r=e.pop();if(\"function\"!=typeof r)throw new TypeError(\"Expected function as last argument, not \"+r);!function u(c,...i){const f=t[++o];let l=-1;if(c)return void r(c);for(;++l<e.length;)null!==i[l]&&void 0!==i[l]||(i[l]=e[l]);e=i;f?n(f,u)(...i):r(null,...i)}(null,...e)},use:function(n){if(\"function\"!=typeof n)throw new TypeError(\"Expected `middelware` to be a function, not \"+n);return t.push(n),e}};return e}function n(t,n){let e;return function(...n){const u=t.length>n.length;let c;u&&n.push(o);try{c=t(...n)}catch(i){const t=i;if(u&&e)throw t;return o(t)}u||(c instanceof Promise?c.then(r,o):c instanceof Error?o(c):r(c))};function o(t,...o){e||(e=!0,n(t,...o))}function r(t){o(null,t)}}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.trough=t,exports.wrap=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":0}},{"source":"../node_modules/trough/index.js","original":{"line":15,"column":7},"generated":{"line":1,"column":13}},{"source":"../node_modules/trough/index.js","name":"trough","original":{"line":15,"column":16},"generated":{"line":1,"column":22}},{"source":"../node_modules/trough/index.js","name":"fns","original":{"line":17,"column":8},"generated":{"line":1,"column":26}},{"source":"../node_modules/trough/index.js","name":"fns","original":{"line":17,"column":8},"generated":{"line":1,"column":32}},{"source":"../node_modules/trough/index.js","original":{"line":17,"column":14},"generated":{"line":1,"column":34}},{"source":"../node_modules/trough/index.js","name":"pipeline","original":{"line":19,"column":8},"generated":{"line":1,"column":37}},{"source":"../node_modules/trough/index.js","original":{"line":19,"column":19},"generated":{"line":1,"column":39}},{"source":"../node_modules/trough/index.js","name":"run","original":{"line":19,"column":20},"generated":{"line":1,"column":40}},{"source":"../node_modules/trough/index.js","name":"run","original":{"line":24,"column":11},"generated":{"line":1,"column":44}},{"source":"../node_modules/trough/index.js","name":"values","original":{"line":24,"column":18},"generated":{"line":1,"column":56}},{"source":"../node_modules/trough/index.js","name":"middlewareIndex","original":{"line":25,"column":8},"generated":{"line":1,"column":59}},{"source":"../node_modules/trough/index.js","name":"middlewareIndex","original":{"line":25,"column":8},"generated":{"line":1,"column":63}},{"source":"../node_modules/trough/index.js","original":{"line":25,"column":27},"generated":{"line":1,"column":66}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":27,"column":10},"generated":{"line":1,"column":68}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":27,"column":10},"generated":{"line":1,"column":74}},{"source":"../node_modules/trough/index.js","name":"values","original":{"line":27,"column":21},"generated":{"line":1,"column":76}},{"source":"../node_modules/trough/index.js","name":"pop","original":{"line":27,"column":28},"generated":{"line":1,"column":78}},{"source":"../node_modules/trough/index.js","original":{"line":29,"column":8},"generated":{"line":1,"column":84}},{"source":"../node_modules/trough/index.js","original":{"line":29,"column":28},"generated":{"line":1,"column":87}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":29,"column":15},"generated":{"line":1,"column":106}},{"source":"../node_modules/trough/index.js","original":{"line":30,"column":12},"generated":{"line":1,"column":108}},{"source":"../node_modules/trough/index.js","original":{"line":30,"column":12},"generated":{"line":1,"column":114}},{"source":"../node_modules/trough/index.js","name":"TypeError","original":{"line":30,"column":16},"generated":{"line":1,"column":118}},{"source":"../node_modules/trough/index.js","original":{"line":30,"column":26},"generated":{"line":1,"column":128}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":30,"column":71},"generated":{"line":1,"column":171}},{"source":"../node_modules/trough/index.js","name":"next","original":{"line":41,"column":13},"generated":{"line":1,"column":175}},{"source":"../node_modules/trough/index.js","name":"next","original":{"line":41,"column":13},"generated":{"line":1,"column":184}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":41,"column":18},"generated":{"line":1,"column":186}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":41,"column":28},"generated":{"line":1,"column":191}},{"source":"../node_modules/trough/index.js","name":"fn","original":{"line":42,"column":12},"generated":{"line":1,"column":194}},{"source":"../node_modules/trough/index.js","name":"fn","original":{"line":42,"column":12},"generated":{"line":1,"column":200}},{"source":"../node_modules/trough/index.js","name":"fns","original":{"line":42,"column":17},"generated":{"line":1,"column":202}},{"source":"../node_modules/trough/index.js","name":"middlewareIndex","original":{"line":42,"column":23},"generated":{"line":1,"column":206}},{"source":"../node_modules/trough/index.js","name":"index","original":{"line":43,"column":10},"generated":{"line":1,"column":209}},{"source":"../node_modules/trough/index.js","name":"index","original":{"line":43,"column":10},"generated":{"line":1,"column":213}},{"source":"../node_modules/trough/index.js","original":{"line":43,"column":19},"generated":{"line":1,"column":216}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":45,"column":10},"generated":{"line":1,"column":218}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":45,"column":10},"generated":{"line":1,"column":221}},{"source":"../node_modules/trough/index.js","original":{"line":47,"column":8},"generated":{"line":1,"column":223}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":46,"column":8},"generated":{"line":1,"column":235}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":46,"column":17},"generated":{"line":1,"column":237}},{"source":"../node_modules/trough/index.js","original":{"line":51,"column":13},"generated":{"line":1,"column":240}},{"source":"../node_modules/trough/index.js","name":"index","original":{"line":51,"column":15},"generated":{"line":1,"column":247}},{"source":"../node_modules/trough/index.js","name":"values","original":{"line":51,"column":23},"generated":{"line":1,"column":249}},{"source":"../node_modules/trough/index.js","name":"length","original":{"line":51,"column":30},"generated":{"line":1,"column":251}},{"source":"../node_modules/trough/index.js","original":{"line":52,"column":30},"generated":{"line":1,"column":259}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":52,"column":12},"generated":{"line":1,"column":266}},{"source":"../node_modules/trough/index.js","name":"index","original":{"line":52,"column":19},"generated":{"line":1,"column":268}},{"source":"../node_modules/trough/index.js","name":"undefined","original":{"line":52,"column":56},"generated":{"line":1,"column":277}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":52,"column":38},"generated":{"line":1,"column":281}},{"source":"../node_modules/trough/index.js","name":"index","original":{"line":52,"column":45},"generated":{"line":1,"column":283}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":53,"column":10},"generated":{"line":1,"column":288}},{"source":"../node_modules/trough/index.js","name":"index","original":{"line":53,"column":17},"generated":{"line":1,"column":290}},{"source":"../node_modules/trough/index.js","name":"values","original":{"line":53,"column":26},"generated":{"line":1,"column":293}},{"source":"../node_modules/trough/index.js","name":"index","original":{"line":53,"column":33},"generated":{"line":1,"column":295}},{"source":"../node_modules/trough/index.js","name":"values","original":{"line":58,"column":6},"generated":{"line":1,"column":299}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":58,"column":15},"generated":{"line":1,"column":301}},{"source":"../node_modules/trough/index.js","name":"fn","original":{"line":61,"column":10},"generated":{"line":1,"column":303}},{"source":"../node_modules/trough/index.js","name":"wrap","original":{"line":62,"column":8},"generated":{"line":1,"column":305}},{"source":"../node_modules/trough/index.js","name":"fn","original":{"line":62,"column":13},"generated":{"line":1,"column":307}},{"source":"../node_modules/trough/index.js","name":"next","original":{"line":62,"column":17},"generated":{"line":1,"column":309}},{"source":"../node_modules/trough/index.js","name":"wrap","original":{"line":62,"column":8},"generated":{"line":1,"column":311}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":62,"column":26},"generated":{"line":1,"column":315}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":64,"column":8},"generated":{"line":1,"column":318}},{"source":"../node_modules/trough/index.js","original":{"line":64,"column":17},"generated":{"line":1,"column":320}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":64,"column":26},"generated":{"line":1,"column":328}},{"source":"../node_modules/trough/index.js","name":"next","original":{"line":33,"column":4},"generated":{"line":1,"column":331}},{"source":"../node_modules/trough/index.js","original":{"line":33,"column":9},"generated":{"line":1,"column":332}},{"source":"../node_modules/trough/index.js","name":"values","original":{"line":33,"column":18},"generated":{"line":1,"column":340}},{"source":"../node_modules/trough/index.js","name":"use","original":{"line":19,"column":25},"generated":{"line":1,"column":344}},{"source":"../node_modules/trough/index.js","name":"use","original":{"line":70,"column":11},"generated":{"line":1,"column":348}},{"source":"../node_modules/trough/index.js","name":"middelware","original":{"line":70,"column":15},"generated":{"line":1,"column":357}},{"source":"../node_modules/trough/index.js","original":{"line":71,"column":8},"generated":{"line":1,"column":360}},{"source":"../node_modules/trough/index.js","original":{"line":71,"column":30},"generated":{"line":1,"column":363}},{"source":"../node_modules/trough/index.js","name":"middelware","original":{"line":71,"column":15},"generated":{"line":1,"column":382}},{"source":"../node_modules/trough/index.js","original":{"line":72,"column":12},"generated":{"line":1,"column":384}},{"source":"../node_modules/trough/index.js","original":{"line":72,"column":12},"generated":{"line":1,"column":390}},{"source":"../node_modules/trough/index.js","name":"TypeError","original":{"line":72,"column":16},"generated":{"line":1,"column":394}},{"source":"../node_modules/trough/index.js","original":{"line":73,"column":8},"generated":{"line":1,"column":404}},{"source":"../node_modules/trough/index.js","name":"middelware","original":{"line":73,"column":57},"generated":{"line":1,"column":451}},{"source":"../node_modules/trough/index.js","name":"pipeline","original":{"line":78,"column":11},"generated":{"line":1,"column":454}},{"source":"../node_modules/trough/index.js","name":"fns","original":{"line":77,"column":4},"generated":{"line":1,"column":461}},{"source":"../node_modules/trough/index.js","name":"push","original":{"line":77,"column":8},"generated":{"line":1,"column":463}},{"source":"../node_modules/trough/index.js","name":"middelware","original":{"line":77,"column":13},"generated":{"line":1,"column":468}},{"source":"../node_modules/trough/index.js","name":"pipeline","original":{"line":78,"column":11},"generated":{"line":1,"column":471}},{"source":"../node_modules/trough/index.js","name":"pipeline","original":{"line":21,"column":9},"generated":{"line":1,"column":475}},{"source":"../node_modules/trough/index.js","name":"pipeline","original":{"line":21,"column":9},"generated":{"line":1,"column":482}},{"source":"../node_modules/trough/index.js","original":{"line":90,"column":7},"generated":{"line":1,"column":484}},{"source":"../node_modules/trough/index.js","name":"wrap","original":{"line":90,"column":16},"generated":{"line":1,"column":493}},{"source":"../node_modules/trough/index.js","name":"middleware","original":{"line":90,"column":21},"generated":{"line":1,"column":495}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":90,"column":33},"generated":{"line":1,"column":497}},{"source":"../node_modules/trough/index.js","name":"called","original":{"line":92,"column":6},"generated":{"line":1,"column":500}},{"source":"../node_modules/trough/index.js","name":"called","original":{"line":92,"column":6},"generated":{"line":1,"column":504}},{"source":"../node_modules/trough/index.js","name":"wrapped","original":{"line":94,"column":9},"generated":{"line":1,"column":506}},{"source":"../node_modules/trough/index.js","name":"wrapped","original":{"line":101,"column":11},"generated":{"line":1,"column":513}},{"source":"../node_modules/trough/index.js","name":"parameters","original":{"line":101,"column":22},"generated":{"line":1,"column":525}},{"source":"../node_modules/trough/index.js","name":"fnExpectsCallback","original":{"line":102,"column":10},"generated":{"line":1,"column":528}},{"source":"../node_modules/trough/index.js","name":"fnExpectsCallback","original":{"line":102,"column":10},"generated":{"line":1,"column":534}},{"source":"../node_modules/trough/index.js","name":"middleware","original":{"line":102,"column":30},"generated":{"line":1,"column":536}},{"source":"../node_modules/trough/index.js","name":"length","original":{"line":102,"column":41},"generated":{"line":1,"column":538}},{"source":"../node_modules/trough/index.js","name":"parameters","original":{"line":102,"column":50},"generated":{"line":1,"column":545}},{"source":"../node_modules/trough/index.js","name":"length","original":{"line":102,"column":61},"generated":{"line":1,"column":547}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":104,"column":8},"generated":{"line":1,"column":554}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":104,"column":8},"generated":{"line":1,"column":558}},{"source":"../node_modules/trough/index.js","name":"fnExpectsCallback","original":{"line":106,"column":8},"generated":{"line":1,"column":560}},{"source":"../node_modules/trough/index.js","name":"parameters","original":{"line":107,"column":6},"generated":{"line":1,"column":563}},{"source":"../node_modules/trough/index.js","name":"push","original":{"line":107,"column":17},"generated":{"line":1,"column":565}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":107,"column":22},"generated":{"line":1,"column":570}},{"source":"../node_modules/trough/index.js","original":{"line":110,"column":8},"generated":{"line":1,"column":573}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":111,"column":6},"generated":{"line":1,"column":577}},{"source":"../node_modules/trough/index.js","name":"middleware","original":{"line":111,"column":15},"generated":{"line":1,"column":579}},{"source":"../node_modules/trough/index.js","name":"parameters","original":{"line":111,"column":29},"generated":{"line":1,"column":584}},{"source":"../node_modules/trough/index.js","original":{"line":112,"column":6},"generated":{"line":1,"column":587}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":112,"column":13},"generated":{"line":1,"column":593}},{"source":"../node_modules/trough/index.js","name":"exception","original":{"line":114,"column":12},"generated":{"line":1,"column":596}},{"source":"../node_modules/trough/index.js","name":"exception","original":{"line":114,"column":12},"generated":{"line":1,"column":602}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":114,"column":24},"generated":{"line":1,"column":604}},{"source":"../node_modules/trough/index.js","name":"fnExpectsCallback","original":{"line":120,"column":10},"generated":{"line":1,"column":606}},{"source":"../node_modules/trough/index.js","name":"fnExpectsCallback","original":{"line":120,"column":10},"generated":{"line":1,"column":609}},{"source":"../node_modules/trough/index.js","name":"called","original":{"line":120,"column":31},"generated":{"line":1,"column":612}},{"source":"../node_modules/trough/index.js","name":"exception","original":{"line":121,"column":14},"generated":{"line":1,"column":614}},{"source":"../node_modules/trough/index.js","name":"exception","original":{"line":121,"column":14},"generated":{"line":1,"column":620}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":124,"column":13},"generated":{"line":1,"column":622}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":124,"column":13},"generated":{"line":1,"column":629}},{"source":"../node_modules/trough/index.js","name":"exception","original":{"line":124,"column":18},"generated":{"line":1,"column":631}},{"source":"../node_modules/trough/index.js","name":"fnExpectsCallback","original":{"line":127,"column":9},"generated":{"line":1,"column":634}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":128,"column":10},"generated":{"line":1,"column":638}},{"source":"../node_modules/trough/index.js","name":"Promise","original":{"line":128,"column":28},"generated":{"line":1,"column":651}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":129,"column":8},"generated":{"line":1,"column":659}},{"source":"../node_modules/trough/index.js","name":"then","original":{"line":129,"column":15},"generated":{"line":1,"column":661}},{"source":"../node_modules/trough/index.js","name":"then","original":{"line":129,"column":20},"generated":{"line":1,"column":666}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":129,"column":26},"generated":{"line":1,"column":668}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":130,"column":17},"generated":{"line":1,"column":671}},{"source":"../node_modules/trough/index.js","name":"Error","original":{"line":130,"column":35},"generated":{"line":1,"column":684}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":131,"column":8},"generated":{"line":1,"column":690}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":131,"column":13},"generated":{"line":1,"column":692}},{"source":"../node_modules/trough/index.js","name":"then","original":{"line":133,"column":8},"generated":{"line":1,"column":695}},{"source":"../node_modules/trough/index.js","name":"result","original":{"line":133,"column":13},"generated":{"line":1,"column":697}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":142,"column":11},"generated":{"line":1,"column":702}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":142,"column":11},"generated":{"line":1,"column":711}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":142,"column":16},"generated":{"line":1,"column":713}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":142,"column":26},"generated":{"line":1,"column":718}},{"source":"../node_modules/trough/index.js","name":"called","original":{"line":143,"column":9},"generated":{"line":1,"column":721}},{"source":"../node_modules/trough/index.js","name":"called","original":{"line":144,"column":6},"generated":{"line":1,"column":725}},{"source":"../node_modules/trough/index.js","original":{"line":144,"column":15},"generated":{"line":1,"column":728}},{"source":"../node_modules/trough/index.js","name":"callback","original":{"line":145,"column":6},"generated":{"line":1,"column":730}},{"source":"../node_modules/trough/index.js","name":"error","original":{"line":145,"column":15},"generated":{"line":1,"column":732}},{"source":"../node_modules/trough/index.js","name":"output","original":{"line":145,"column":25},"generated":{"line":1,"column":737}},{"source":"../node_modules/trough/index.js","name":"then","original":{"line":154,"column":11},"generated":{"line":1,"column":741}},{"source":"../node_modules/trough/index.js","name":"then","original":{"line":154,"column":11},"generated":{"line":1,"column":750}},{"source":"../node_modules/trough/index.js","name":"value","original":{"line":154,"column":16},"generated":{"line":1,"column":752}},{"source":"../node_modules/trough/index.js","name":"done","original":{"line":155,"column":4},"generated":{"line":1,"column":755}},{"source":"../node_modules/trough/index.js","original":{"line":155,"column":9},"generated":{"line":1,"column":757}},{"source":"../node_modules/trough/index.js","name":"value","original":{"line":155,"column":15},"generated":{"line":1,"column":762}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":766}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":773}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":788}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":796}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":809}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":810}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":817}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":821}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":829}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":836}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":838}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":846}},{"source":"../node_modules/trough/index.js","original":{"line":157,"column":1},"generated":{"line":1,"column":851}}],"sources":{"../node_modules/trough/index.js":"/**\n * @typedef {(error?: Error|null|undefined, ...output: any[]) => void} Callback\n * @typedef {(...input: any[]) => any} Middleware\n *\n * @typedef {(...input: any[]) => void} Run Call all middleware.\n * @typedef {(fn: Middleware) => Pipeline} Use Add `fn` (middleware) to the list.\n * @typedef {{run: Run, use: Use}} Pipeline\n */\n\n/**\n * Create new middleware.\n *\n * @returns {Pipeline}\n */\nexport function trough() {\n  /** @type {Middleware[]} */\n  const fns = []\n  /** @type {Pipeline} */\n  const pipeline = {run, use}\n\n  return pipeline\n\n  /** @type {Run} */\n  function run(...values) {\n    let middlewareIndex = -1\n    /** @type {Callback} */\n    const callback = values.pop()\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Expected function as last argument, not ' + callback)\n    }\n\n    next(null, ...values)\n\n    /**\n     * Run the next `fn`, or we’re done.\n     *\n     * @param {Error|null|undefined} error\n     * @param {any[]} output\n     */\n    function next(error, ...output) {\n      const fn = fns[++middlewareIndex]\n      let index = -1\n\n      if (error) {\n        callback(error)\n        return\n      }\n\n      // Copy non-nullish input into values.\n      while (++index < values.length) {\n        if (output[index] === null || output[index] === undefined) {\n          output[index] = values[index]\n        }\n      }\n\n      // Save the newly created `output` for the next call.\n      values = output\n\n      // Next or done.\n      if (fn) {\n        wrap(fn, next)(...output)\n      } else {\n        callback(null, ...output)\n      }\n    }\n  }\n\n  /** @type {Use} */\n  function use(middelware) {\n    if (typeof middelware !== 'function') {\n      throw new TypeError(\n        'Expected `middelware` to be a function, not ' + middelware\n      )\n    }\n\n    fns.push(middelware)\n    return pipeline\n  }\n}\n\n/**\n * Wrap `middleware`.\n * Can be sync or async; return a promise, receive a callback, or return new\n * values and errors.\n *\n * @param {Middleware} middleware\n * @param {Callback} callback\n */\nexport function wrap(middleware, callback) {\n  /** @type {boolean} */\n  let called\n\n  return wrapped\n\n  /**\n   * Call `middleware`.\n   * @param {any[]} parameters\n   * @returns {void}\n   */\n  function wrapped(...parameters) {\n    const fnExpectsCallback = middleware.length > parameters.length\n    /** @type {any} */\n    let result\n\n    if (fnExpectsCallback) {\n      parameters.push(done)\n    }\n\n    try {\n      result = middleware(...parameters)\n    } catch (error) {\n      /** @type {Error} */\n      const exception = error\n\n      // Well, this is quite the pickle.\n      // `middleware` received a callback and called it synchronously, but that\n      // threw an error.\n      // The only thing left to do is to throw the thing instead.\n      if (fnExpectsCallback && called) {\n        throw exception\n      }\n\n      return done(exception)\n    }\n\n    if (!fnExpectsCallback) {\n      if (result instanceof Promise) {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  /**\n   * Call `callback`, only once.\n   * @type {Callback}\n   */\n  function done(error, ...output) {\n    if (!called) {\n      called = true\n      callback(error, ...output)\n    }\n  }\n\n  /**\n   * Call `done` with one value.\n   *\n   * @param {any} [value]\n   */\n  function then(value) {\n    done(null, value)\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"60ebcc0c48b75e84f9e7abff57801dd0","cacheData":{"env":{}}}